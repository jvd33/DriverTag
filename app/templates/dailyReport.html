<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Daily Report</title>

    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#chart').highcharts({
                chart: {
                    type: 'line',
                    zoomType: 'x'
                },
                title: {
                    text: 'Daily Data'
                },
                xAxis: {
                    categories: {{ timestamps|tojson|safe }}
                },
                yAxis: {
                    allowDecimals: true,
                    title: {
                        text: 'Acceleration'
                    }
                },
                plotOptions: {
                    series:{
                        turboThreshold: 0
                    }
                },
                series: [{
                    name: 'X-accel',
                    data: {{ x_accel|tojson|safe }}
                }]/*, {
                    name: 'Y-accel',
                    data: {{ y_accel|tojson|safe }}
                }]*/
            });
        });
        
       $(function () {
            $('#chart1').highcharts({
                chart: {
                    type: 'line',
                    zoomType: 'x'
                },
                title: {
                    text: 'Passing Threshold Data'
                },
                xAxis: {
                    categories: {{ timestamps|tojson|safe }}
                },
                yAxis: {
                    allowDecimals: true,
                    title: {
                        text: 'Acceleration over threshold'
                    },
                    plotBands: [{
						from: 0.0,
						to: 0.33,
						color: '#ffffe6',
					},{ 
						from: 0.33,
						to: 0.66,
						color: '#ffe0cc',
					},{ 
						from: 0.66,
						to: 1.0,
						color: '#ffcccc',
					}]
                },
                plotOptions: {
                    series:{
                        turboThreshold: 0
                    }
                },
                series: [{
                    name: 'X-accel past the threshold',
                    data: {{ lst|tojson|safe }}
                }]
            });
        });
    </script>
</head>

<body>
    <a href="/home">Back</a>

        <div id="chart" style="width:100%; height:400px;"></div>
		<div id="chart1" style="width:100%; height:400px;"></div>
		{% if maxx %}
			<p>Your set acceleration is {{ maxx }}</p>
		{% endif %}
        {% if datas %}
            <p>Your Data for {{ datas[0].timestamp.strftime("%A, %d. %B %Y ") }}</p>

            <table border="1">

            <!-- table headers -->
            <tr>
                <th>Timestamp</th>
                <th>X-Accel</th>
                <th>Y-Accel</th>
                <th>Z-Accel</th>
            </tr>

            {% if datas %}
                {% for data in datas %}
                    <tr>
                        <td>{{ data.timestamp }}</td>
                        <td>{{ data.x_accelorometer }}</td>
                        <td>{{ data.y_accelorometer }}</td>
                        <td>{{ data.z_accelorometer }}</td>
                    </tr>
                {% endfor %}
            {% endif %}

            </table>

        {% else %}

            <p>You have no Data</p>

        {% endif %}


</body>

</html>
